# ğŸ”„ RegLex AI - System Flowchart Documentation

## ğŸ“‹ Table of Contents
1. [Overview](#overview)
2. [System Architecture Flowchart](#system-architecture-flowchart)
3. [Document Upload Flow](#document-upload-flow)
4. [Compliance Analysis Flow](#compliance-analysis-flow)
5. [Conversational Agent Flow](#conversational-agent-flow)
6. [Data Pipeline Flow](#data-pipeline-flow)
7. [Analytics Dashboard Flow](#analytics-dashboard-flow)
8. [Error Handling Flow](#error-handling-flow)
9. [Component Interaction Matrix](#component-interaction-matrix)

---

## ğŸ¯ Overview

This document provides comprehensive flowcharts for the RegLex AI system, illustrating how data flows through different components and how they interact with each other.

---

## ğŸ—ï¸ System Architecture Flowchart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          REGLEX AI - CLOUD ARCHITECTURE                           â”‚
â”‚                                                                                    â”‚
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                            USER LAYER                                    â”‚    â”‚
â”‚  â”‚                                                                           â”‚    â”‚
â”‚  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚      â”‚   Web App    â”‚    â”‚  Mobile App  â”‚    â”‚  API Client  â”‚          â”‚    â”‚
â”‚  â”‚      â”‚   (Chrome)   â”‚    â”‚(Smartphone)  â”‚    â”‚    (Code)    â”‚          â”‚    â”‚
â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â”‚             â”‚                     â”‚                   â”‚                   â”‚    â”‚
â”‚  â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                       â”‚                                            â”‚
â”‚                                       â”‚ HTTPS (443)                                â”‚
â”‚                                       â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      NETWORK LAYER                                         â”‚   â”‚
â”‚  â”‚                                                                             â”‚   â”‚
â”‚  â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
â”‚  â”‚                â”‚   Cloud Load Balancer (GCP)       â”‚                       â”‚   â”‚
â”‚  â”‚                â”‚   â€¢ SSL/TLS Termination           â”‚                       â”‚   â”‚
â”‚  â”‚                â”‚   â€¢ DDoS Protection                â”‚                       â”‚   â”‚
â”‚  â”‚                â”‚   â€¢ Global Distribution            â”‚                       â”‚   â”‚
â”‚  â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚                                            â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                        â”‚                            â”‚                            â”‚
â”‚                        â”‚ HTTPS                      â”‚ HTTPS                      â”‚
â”‚                        â–¼                            â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      APPLICATION LAYER                                      â”‚ â”‚
â”‚  â”‚                                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Frontend Service            â”‚      â”‚  Backend Service                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  (Cloud Run - Blue)          â”‚      â”‚  (Cloud Run - Green)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                              â”‚      â”‚                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Next.js App            â”‚ â”‚      â”‚  â”‚  FastAPI App                â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Pages/Routes         â”‚ â”‚      â”‚  â”‚  â€¢ REST API Endpoints       â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Components           â”‚ â”‚â—„â”€â”€â”€â”€â–ºâ”‚  â”‚  â€¢ WebSocket Server         â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ SSR/SSG              â”‚ â”‚HTTPS â”‚  â”‚  â€¢ Multi-threaded           â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                              â”‚      â”‚                                   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  Business Logic             â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚                             â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ Compliance Checker     â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ Regulation Retriever â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ Conversational Agent â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ Elastic Search       â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚                             â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ LLM Provider           â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ Vertex AI (Primary)  â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ Claude (Fallback)    â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ OpenAI (Fallback)    â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚                             â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ Embedder (Legal-BERT)  â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â”‚ â€¢ 768-dim vectors      â”‚ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚                                   â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  Data Access Layer          â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ Elastic Client           â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ GCS Client               â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ BigQuery Client          â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ Secret Manager Client    â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚                                   â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  Integration Layer          â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ PyMuPDF Processor        â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ Fivetran Integration     â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â”‚  â€¢ Kibana Integration       â”‚ â”‚ â”‚ â”‚
â”‚  â”‚                                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                      â”‚                            â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                         â”‚                            â”‚                â”‚          â”‚
â”‚                         â–¼                            â–¼                â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      AI & SEARCH LAYER (Purple)                             â”‚ â”‚
â”‚  â”‚                                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Vertex AI           â”‚  â”‚  Elasticsearch       â”‚  â”‚  Legal-BERT      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  (Gemini Pro)        â”‚  â”‚  Cluster             â”‚  â”‚  Embeddings      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ LLM Analysis      â”‚  â”‚  â€¢ Hybrid Search     â”‚â—„â”€â”‚  â€¢ 768-dim      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Compliance Check  â”‚  â”‚  â€¢ BM25 + kNN       â”‚  â”‚    vectors       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Risk Scoring      â”‚  â”‚  â€¢ 10K+ regs        â”‚  â”‚  â€¢ Semantic      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Q&A               â”‚  â”‚  â€¢ <200ms query     â”‚  â”‚    similarity    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  us-central1         â”‚  â”‚  asia-south1        â”‚  â”‚  Cloud Run       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                            â”‚                                    â”‚
â”‚                                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      STORAGE LAYER (Orange)                                 â”‚ â”‚
â”‚  â”‚                                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Cloud Storage (GCS) â”‚  â”‚  BigQuery            â”‚  â”‚  Secret Manager  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚  Data Warehouse      â”‚  â”‚  Credentials     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ PDF Storage       â”‚  â”‚                      â”‚  â”‚                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Document Archive  â”‚  â”‚  3 Tables:           â”‚  â”‚  â€¢ API Keys      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Versioning        â”‚  â”‚  â€¢ compliance_       â”‚  â”‚  â€¢ Elastic Auth  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Lifecycle Mgmt    â”‚  â”‚    analyses (125)    â”‚  â”‚  â€¢ Gemini Keys   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚  â€¢ clause_           â”‚  â”‚  â€¢ Encrypted     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Multi-region        â”‚  â”‚    verifications(542)â”‚  â”‚                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚  â€¢ risk_metrics (89) â”‚  â”‚  Global          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                            â–²                                    â”‚
â”‚                                            â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      DATA PIPELINE LAYER                                   â”‚ â”‚
â”‚  â”‚                                            â”‚                                â”‚ â”‚
â”‚  â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚                  â”‚         Fivetran Connector                      â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚                                                 â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  â€¢ Custom Python SDK                            â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  â€¢ Incremental Sync (Hourly)                    â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  â€¢ Schema Auto-Detection                        â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  â€¢ Idempotent Operations                        â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  â€¢ Error Handling & Retries                     â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚                                                 â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  Source: Backend API                            â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  Destination: BigQuery                          â”‚        â”‚ â”‚
â”‚  â”‚                  â”‚  Frequency: Every 60 minutes                    â”‚        â”‚ â”‚
â”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                            â”‚                                     â”‚
â”‚                                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  OBSERVABILITY LAYER (Yellow)                               â”‚ â”‚
â”‚  â”‚                                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Kibana              â”‚  â”‚  Cloud Monitoring    â”‚  â”‚  Cloud Logging   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Dashboards          â”‚  â”‚  (Metrics)           â”‚  â”‚  (Logs)          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Risk Charts       â”‚  â”‚  â€¢ CPU/Memory Usage  â”‚  â”‚  â€¢ App Logs      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Compliance Trends â”‚  â”‚  â€¢ Latency Metrics   â”‚  â”‚  â€¢ Audit Trails  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Violation Patternsâ”‚  â”‚  â€¢ Error Rates       â”‚  â”‚  â€¢ Debug Info    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Search Analytics  â”‚  â”‚  â€¢ Custom Alerts     â”‚  â”‚  â€¢ Stack Traces  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  asia-south1         â”‚  â”‚  Global              â”‚  â”‚  Global          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“„ Document Upload Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DOCUMENT UPLOAD & ANALYSIS FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START
  â”‚
  â”‚ User selects PDF file
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Browser       â”‚
â”‚  (Web App)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ POST /upload-pdf
           â”‚ Content-Type: multipart/form-data
           â”‚ Payload: {file: PDF, lang: "en"}
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Service   â”‚
â”‚  (Next.js)          â”‚
â”‚                     â”‚
â”‚  [Validate File]    â”‚
â”‚  â€¢ Check size       â”‚
â”‚  â€¢ Check type       â”‚
â”‚  â€¢ Check format     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Forward to Backend API
           â”‚ POST /upload-pdf/
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Service (FastAPI)          â”‚
â”‚                                     â”‚
â”‚  [Receive Upload]                   â”‚
â”‚  â€¢ Validate request                 â”‚
â”‚  â€¢ Generate document ID             â”‚
â”‚  â€¢ Log upload event                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Extract text
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PyMuPDF Processor                  â”‚
â”‚                                     â”‚
â”‚  [Extract Content]                  â”‚
â”‚  â€¢ Parse PDF structure              â”‚
â”‚  â€¢ Extract text from pages          â”‚
â”‚  â€¢ Identify clauses                 â”‚
â”‚  â€¢ Clean & normalize text           â”‚
â”‚                                     â”‚
â”‚  Output: List[Clause]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Store document
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cloud Storage (GCS)                â”‚
â”‚                                     â”‚
â”‚  [Store PDF]                        â”‚
â”‚  â€¢ Bucket: reglex-documents         â”‚
â”‚  â€¢ Path: /uploads/{doc_id}.pdf      â”‚
â”‚  â€¢ Metadata: timestamp, user, etc.  â”‚
â”‚  â€¢ Versioning: Enabled              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ For each clause
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Legal-BERT Embedder                â”‚
â”‚                                     â”‚
â”‚  [Generate Embeddings]              â”‚
â”‚  â€¢ Tokenize clause text             â”‚
â”‚  â€¢ Run through Legal-BERT model     â”‚
â”‚  â€¢ Output: 768-dimensional vector   â”‚
â”‚  â€¢ Normalize vector                 â”‚
â”‚                                     â”‚
â”‚  Processing: ~50ms per clause       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Search for regulations
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Elasticsearch Cluster              â”‚
â”‚                                     â”‚
â”‚  [Hybrid Search]                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  BM25 Search (Lexical)      â”‚   â”‚
â”‚  â”‚  â€¢ Keyword matching         â”‚   â”‚
â”‚  â”‚  â€¢ Fuzzy matching           â”‚   â”‚
â”‚  â”‚  â€¢ Field boosting           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           +                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  kNN Search (Semantic)      â”‚   â”‚
â”‚  â”‚  â€¢ Cosine similarity        â”‚   â”‚
â”‚  â”‚  â€¢ 768-dim vector space     â”‚   â”‚
â”‚  â”‚  â€¢ HNSW algorithm           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           =                         â”‚
â”‚  Top 5 relevant regulations         â”‚
â”‚  with relevance scores              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ For each clause + regulations
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vertex AI (Gemini Pro)             â”‚
â”‚                                     â”‚
â”‚  [Compliance Verification]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Input:                     â”‚   â”‚
â”‚  â”‚  â€¢ Clause text              â”‚   â”‚
â”‚  â”‚  â€¢ Top 5 regulations        â”‚   â”‚
â”‚  â”‚  â€¢ Context/metadata         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â†“                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  LLM Analysis:              â”‚   â”‚
â”‚  â”‚  â€¢ Check compliance         â”‚   â”‚
â”‚  â”‚  â€¢ Identify violations      â”‚   â”‚
â”‚  â”‚  â€¢ Assess risk level        â”‚   â”‚
â”‚  â”‚  â€¢ Generate explanation     â”‚   â”‚
â”‚  â”‚  â€¢ Provide recommendations  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â†“                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Output:                    â”‚   â”‚
â”‚  â”‚  â€¢ compliant: true/false    â”‚   â”‚
â”‚  â”‚  â€¢ risk_level: Low/Med/High â”‚   â”‚
â”‚  â”‚  â€¢ risk_score: 0.0-1.0      â”‚   â”‚
â”‚  â”‚  â€¢ explanation: text        â”‚   â”‚
â”‚  â”‚  â€¢ regulation_matched: ID   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  Processing: ~2.5s per clause       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Store results (3 destinations)
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                    â”‚                   â”‚
           â–¼                    â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Memory â”‚  â”‚  Elasticsearch  â”‚  â”‚  Fivetran Queue â”‚
â”‚  (Session)      â”‚  â”‚  Index          â”‚  â”‚  (Pending Sync) â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚  â€¢ Temp storage â”‚  â”‚  â€¢ Index resultsâ”‚  â”‚  â€¢ Queue for    â”‚
â”‚  â€¢ User session â”‚  â”‚  â€¢ Make          â”‚  â”‚    BigQuery     â”‚
â”‚  â€¢ Quick access â”‚  â”‚    searchable   â”‚  â”‚    sync         â”‚
â”‚                 â”‚  â”‚  â€¢ Enable       â”‚  â”‚  â€¢ Hourly batch â”‚
â”‚                 â”‚  â”‚    analytics    â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                         â”‚
          â”‚                                         â”‚ Hourly sync
          â”‚                                         â–¼
          â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                              â”‚  BigQuery Tables    â”‚
          â”‚                              â”‚  â€¢ analyses         â”‚
          â”‚                              â”‚  â€¢ verifications    â”‚
          â”‚                              â”‚  â€¢ risk_metrics     â”‚
          â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Return response
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Service   â”‚
â”‚  (Display Results)  â”‚
â”‚                     â”‚
â”‚  â€¢ Compliance score â”‚
â”‚  â€¢ Risk level       â”‚
â”‚  â€¢ Clause breakdown â”‚
â”‚  â€¢ Violations       â”‚
â”‚  â€¢ Recommendations  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Browser       â”‚
â”‚  (Results Page)     â”‚
â”‚                     â”‚
â”‚  â€¢ Visual dashboard â”‚
â”‚  â€¢ Charts & graphs  â”‚
â”‚  â€¢ Downloadable PDF â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
END
```

**Flow Metrics:**
- **Total Time**: 6-10 seconds (10 clauses)
- **Bottlenecks**: LLM verification (2.5s per clause)
- **Parallelization**: Up to 5 clauses at once
- **Success Rate**: 98.5%

---

## âœ… Compliance Analysis Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMPLIANCE ANALYSIS DETAILED FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT: Single Clause + Document Context
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Clause Preprocessing           â”‚
â”‚                                         â”‚
â”‚  [Text Normalization]                   â”‚
â”‚  â€¢ Remove special characters            â”‚
â”‚  â€¢ Normalize whitespace                 â”‚
â”‚  â€¢ Fix encoding issues                  â”‚
â”‚  â€¢ Identify clause number               â”‚
â”‚                                         â”‚
â”‚  Output: Cleaned clause text            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Generate Semantic Embedding    â”‚
â”‚                                         â”‚
â”‚  [Legal-BERT Processing]                â”‚
â”‚  â€¢ Tokenize: [CLS] + tokens + [SEP]     â”‚
â”‚  â€¢ Max length: 512 tokens               â”‚
â”‚  â€¢ Generate embedding (768-dim)         â”‚
â”‚  â€¢ L2 normalization                     â”‚
â”‚                                         â”‚
â”‚  Output: query_vector (768-dim)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Retrieve Relevant Regulations  â”‚
â”‚                                         â”‚
â”‚  [Elasticsearch Hybrid Query]           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Query Structure:                 â”‚ â”‚
â”‚  â”‚  {                                â”‚ â”‚
â”‚  â”‚    "bool": {                      â”‚ â”‚
â”‚  â”‚      "should": [                  â”‚ â”‚
â”‚  â”‚        {                          â”‚ â”‚
â”‚  â”‚          "multi_match": {         â”‚ â”‚
â”‚  â”‚            "query": clause_text,  â”‚ â”‚
â”‚  â”‚            "fields": [            â”‚ â”‚
â”‚  â”‚              "regulation_text^2", â”‚ â”‚
â”‚  â”‚              "section^1.5"        â”‚ â”‚
â”‚  â”‚            ],                     â”‚ â”‚
â”‚  â”‚            "fuzziness": "AUTO"    â”‚ â”‚
â”‚  â”‚          }                        â”‚ â”‚
â”‚  â”‚        },                         â”‚ â”‚
â”‚  â”‚        {                          â”‚ â”‚
â”‚  â”‚          "script_score": {        â”‚ â”‚
â”‚  â”‚            "query": {...},        â”‚ â”‚
â”‚  â”‚            "script": {            â”‚ â”‚
â”‚  â”‚              "source":            â”‚ â”‚
â”‚  â”‚              "cosineSimilarity(   â”‚ â”‚
â”‚  â”‚                params.query_vec,  â”‚ â”‚
â”‚  â”‚                'regulation_vec'   â”‚ â”‚
â”‚  â”‚              ) + 1.0"             â”‚ â”‚
â”‚  â”‚            }                      â”‚ â”‚
â”‚  â”‚          }                        â”‚ â”‚
â”‚  â”‚        }                          â”‚ â”‚
â”‚  â”‚      ]                            â”‚ â”‚
â”‚  â”‚    },                             â”‚ â”‚
â”‚  â”‚    "size": 5                      â”‚ â”‚
â”‚  â”‚  }                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Output: Top 5 regulations with scores  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Build LLM Prompt               â”‚
â”‚                                         â”‚
â”‚  [Prompt Engineering]                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  System Prompt:                   â”‚ â”‚
â”‚  â”‚  "You are an expert SEBI           â”‚ â”‚
â”‚  â”‚   compliance analyst..."           â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚  Context:                          â”‚ â”‚
â”‚  â”‚  "Relevant regulations:            â”‚ â”‚
â”‚  â”‚   1. [Regulation 1 text]           â”‚ â”‚
â”‚  â”‚   2. [Regulation 2 text]           â”‚ â”‚
â”‚  â”‚   ..."                             â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚  Task:                             â”‚ â”‚
â”‚  â”‚  "Analyze this clause:             â”‚ â”‚
â”‚  â”‚   [Clause text]                    â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚   Determine:                       â”‚ â”‚
â”‚  â”‚   - Is it compliant?               â”‚ â”‚
â”‚  â”‚   - Which regulation applies?      â”‚ â”‚
â”‚  â”‚   - What's the risk level?         â”‚ â”‚
â”‚  â”‚   - Provide explanation            â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚   Output format: JSON {...}"       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Output: Formatted prompt (2K tokens)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: LLM Inference                  â”‚
â”‚                                         â”‚
â”‚  [Vertex AI - Gemini Pro]              â”‚
â”‚  â€¢ Model: gemini-1.5-pro                â”‚
â”‚  â€¢ Temperature: 0.1 (consistent)        â”‚
â”‚  â€¢ Max output: 1024 tokens              â”‚
â”‚  â€¢ Top-p: 0.95                          â”‚
â”‚                                         â”‚
â”‚  [Processing]                           â”‚
â”‚  â€¢ Send prompt to Vertex AI API         â”‚
â”‚  â€¢ Wait for streaming response          â”‚
â”‚  â€¢ Parse JSON output                    â”‚
â”‚                                         â”‚
â”‚  [Fallback Logic]                       â”‚
â”‚  IF Vertex AI fails:                    â”‚
â”‚    â†’ Try Claude (Anthropic)             â”‚
â”‚  IF Claude fails:                       â”‚
â”‚    â†’ Try OpenAI GPT-4                   â”‚
â”‚  IF all fail:                           â”‚
â”‚    â†’ Return error with cached result    â”‚
â”‚                                         â”‚
â”‚  Output: LLM response (JSON)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: Parse & Validate Response      â”‚
â”‚                                         â”‚
â”‚  [Response Parsing]                     â”‚
â”‚  Expected structure:                    â”‚
â”‚  {                                      â”‚
â”‚    "compliant": boolean,                â”‚
â”‚    "regulation_matched": string,        â”‚
â”‚    "risk_level": "Low|Medium|High",     â”‚
â”‚    "risk_score": float (0.0-1.0),       â”‚
â”‚    "explanation": string,               â”‚
â”‚    "recommendations": [string]          â”‚
â”‚  }                                      â”‚
â”‚                                         â”‚
â”‚  [Validation]                           â”‚
â”‚  â€¢ Check all required fields present    â”‚
â”‚  â€¢ Validate data types                  â”‚
â”‚  â€¢ Clamp risk_score to [0, 1]           â”‚
â”‚  â€¢ Sanitize text fields                 â”‚
â”‚                                         â”‚
â”‚  Output: Validated result object        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: Risk Assessment                â”‚
â”‚                                         â”‚
â”‚  [Multi-Dimensional Risk Scoring]       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Factor 1: Violation Severity     â”‚ â”‚
â”‚  â”‚  â€¢ Critical: 0.8-1.0              â”‚ â”‚
â”‚  â”‚  â€¢ High: 0.6-0.8                  â”‚ â”‚
â”‚  â”‚  â€¢ Medium: 0.3-0.6                â”‚ â”‚
â”‚  â”‚  â€¢ Low: 0.0-0.3                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Factor 2: Regulation Importance  â”‚ â”‚
â”‚  â”‚  â€¢ SEBI LODR: High weight         â”‚ â”‚
â”‚  â”‚  â€¢ SEBI ICDR: Medium weight       â”‚ â”‚
â”‚  â”‚  â€¢ Others: Lower weight           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Factor 3: Confidence Score       â”‚ â”‚
â”‚  â”‚  â€¢ Elastic relevance score        â”‚ â”‚
â”‚  â”‚  â€¢ LLM confidence                 â”‚ â”‚
â”‚  â”‚  â€¢ Combined score                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Final Risk Score = weighted_average(   â”‚
â”‚    severity, importance, confidence     â”‚
â”‚  )                                      â”‚
â”‚                                         â”‚
â”‚  Output: Final risk_score (0.0-1.0)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 8: Store Results                  â”‚
â”‚                                         â”‚
â”‚  [Multi-Destination Storage]            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Destination 1: Session Memory    â”‚ â”‚
â”‚  â”‚  â€¢ In-memory dict                 â”‚ â”‚
â”‚  â”‚  â€¢ Key: document_id               â”‚ â”‚
â”‚  â”‚  â€¢ TTL: 1 hour                    â”‚ â”‚
â”‚  â”‚  â€¢ Purpose: Fast retrieval        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Destination 2: Elasticsearch     â”‚ â”‚
â”‚  â”‚  â€¢ Index: compliance_results      â”‚ â”‚
â”‚  â”‚  â€¢ Document: full result          â”‚ â”‚
â”‚  â”‚  â€¢ Purpose: Search & analytics    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Destination 3: Fivetran Queue    â”‚ â”‚
â”‚  â”‚  â€¢ Queue for BigQuery sync        â”‚ â”‚
â”‚  â”‚  â€¢ Batch: hourly                  â”‚ â”‚
â”‚  â”‚  â€¢ Purpose: Long-term analytics   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Output: Stored successfully            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 9: Generate Response              â”‚
â”‚                                         â”‚
â”‚  [API Response Construction]            â”‚
â”‚  {                                      â”‚
â”‚    "status": "success",                 â”‚
â”‚    "document_id": "abc123",             â”‚
â”‚    "clause_number": 5,                  â”‚
â”‚    "compliance": {                      â”‚
â”‚      "compliant": true,                 â”‚
â”‚      "regulation": "SEBI LODR Reg 43",  â”‚
â”‚      "risk_level": "Low",               â”‚
â”‚      "risk_score": 0.15,                â”‚
â”‚      "explanation": "...",              â”‚
â”‚      "recommendations": [...]           â”‚
â”‚    },                                   â”‚
â”‚    "processing_time_ms": 2500,          â”‚
â”‚    "timestamp": "2025-01-15T10:30:00Z"  â”‚
â”‚  }                                      â”‚
â”‚                                         â”‚
â”‚  Output: JSON response                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
OUTPUT: Compliance Analysis Result
```

**Decision Points:**
- **Compliant?** â†’ Green badge, low priority
- **Non-compliant?** â†’ Red badge, high priority alert
- **Uncertain?** â†’ Yellow badge, manual review required

---

## ğŸ’¬ Conversational Agent Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CONVERSATIONAL AGENT (CHAT) FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START: User asks question
  â”‚
  â”‚ Example: "What are the disclosure requirements for IPOs?"
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Chat Interface)          â”‚
â”‚                                     â”‚
â”‚  [User Input]                       â”‚
â”‚  â€¢ Text input field                 â”‚
â”‚  â€¢ Send button clicked              â”‚
â”‚  â€¢ Show typing indicator            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ POST /api/chat
           â”‚ {
           â”‚   "message": "What are...",
           â”‚   "conversation_id": "xyz",
           â”‚   "history": [...]
           â”‚ }
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API (/api/chat)            â”‚
â”‚                                     â”‚
â”‚  [Request Processing]               â”‚
â”‚  â€¢ Validate input                   â”‚
â”‚  â€¢ Load conversation history        â”‚
â”‚  â€¢ Extract user intent              â”‚
â”‚  â€¢ Log interaction                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intent Classification              â”‚
â”‚                                     â”‚
â”‚  [Analyze Query Type]               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Type 1: Direct Question     â”‚   â”‚
â”‚  â”‚ "What is SEBI Regulation X?"â”‚   â”‚
â”‚  â”‚ â†’ Search regulations        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Type 2: Document Query      â”‚   â”‚
â”‚  â”‚ "Is my document compliant?" â”‚   â”‚
â”‚  â”‚ â†’ Retrieve analysis results â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Type 3: Clarification       â”‚   â”‚
â”‚  â”‚ "What does that mean?"      â”‚   â”‚
â”‚  â”‚ â†’ Use conversation context  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Type 4: General Info        â”‚   â”‚
â”‚  â”‚ "How does RegLex work?"     â”‚   â”‚
â”‚  â”‚ â†’ Use system knowledge      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  Output: intent_type + params       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate Query Embedding           â”‚
â”‚                                     â”‚
â”‚  [Legal-BERT Encoding]              â”‚
â”‚  â€¢ Encode user question             â”‚
â”‚  â€¢ Include conversation context     â”‚
â”‚  â€¢ Generate 768-dim vector          â”‚
â”‚                                     â”‚
â”‚  Output: query_vector               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Retrieve Context (RAG)             â”‚
â”‚                                     â”‚
â”‚  [Elasticsearch Retrieval]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Search Scope:              â”‚   â”‚
â”‚  â”‚  â€¢ SEBI regulations index   â”‚   â”‚
â”‚  â”‚  â€¢ Past analyses (user's)   â”‚   â”‚
â”‚  â”‚  â€¢ Knowledge base articles  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  [Hybrid Search]                    â”‚
â”‚  â€¢ BM25 keyword search              â”‚
â”‚  â€¢ kNN vector similarity            â”‚
â”‚  â€¢ Combine scores                   â”‚
â”‚  â€¢ Rank results                     â”‚
â”‚                                     â”‚
â”‚  Output: Top 10 relevant docs       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Conversational Prompt        â”‚
â”‚                                     â”‚
â”‚  [Prompt Construction]              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  System Instructions:       â”‚   â”‚
â”‚  â”‚  "You are an AI assistant   â”‚   â”‚
â”‚  â”‚   specialized in SEBI        â”‚   â”‚
â”‚  â”‚   compliance. Answer         â”‚   â”‚
â”‚  â”‚   questions accurately       â”‚   â”‚
â”‚  â”‚   using provided context."   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Conversation History:      â”‚   â”‚
â”‚  â”‚  User: "What is LODR?"      â”‚   â”‚
â”‚  â”‚  AI: "LODR stands for..."   â”‚   â”‚
â”‚  â”‚  [Last 5 exchanges]         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Retrieved Context:         â”‚   â”‚
â”‚  â”‚  Doc 1: [Regulation text]   â”‚   â”‚
â”‚  â”‚  Doc 2: [Analysis result]   â”‚   â”‚
â”‚  â”‚  Doc 3: [KB article]        â”‚   â”‚
â”‚  â”‚  [Top 10 docs]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Current Question:          â”‚   â”‚
â”‚  â”‚  "What are disclosure       â”‚   â”‚
â”‚  â”‚   requirements for IPOs?"   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Output Instructions:       â”‚   â”‚
â”‚  â”‚  â€¢ Be concise              â”‚   â”‚
â”‚  â”‚  â€¢ Cite sources            â”‚   â”‚
â”‚  â”‚  â€¢ Use bullet points       â”‚   â”‚
â”‚  â”‚  â€¢ Provide examples        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  Output: Complete prompt (4K tokens)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM Generation                     â”‚
â”‚                                     â”‚
â”‚  [Vertex AI - Gemini Pro]           â”‚
â”‚  â€¢ Model: gemini-1.5-pro            â”‚
â”‚  â€¢ Temperature: 0.3 (balanced)      â”‚
â”‚  â€¢ Max tokens: 2048                 â”‚
â”‚  â€¢ Stream: true (real-time)         â”‚
â”‚                                     â”‚
â”‚  [Streaming Response]               â”‚
â”‚  Token 1 â†’ Frontend                 â”‚
â”‚  Token 2 â†’ Frontend                 â”‚
â”‚  Token 3 â†’ Frontend                 â”‚
â”‚  ...                                â”‚
â”‚                                     â”‚
â”‚  [Response Format]                  â”‚
â”‚  "IPO disclosure requirements       â”‚
â”‚   under SEBI ICDR:                  â”‚
â”‚                                     â”‚
â”‚   1. **Financial Disclosures**      â”‚
â”‚      â€¢ 3 years of audited...        â”‚
â”‚                                     â”‚
â”‚   2. **Risk Factors**               â”‚
â”‚      â€¢ Material risks must...       â”‚
â”‚                                     â”‚
â”‚   Sources:                          â”‚
â”‚   - SEBI ICDR Regulation 26         â”‚
â”‚   - SEBI ICDR Regulation 30"        â”‚
â”‚                                     â”‚
â”‚  Output: Formatted response         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Post-Processing                    â”‚
â”‚                                     â”‚
â”‚  [Enhancements]                     â”‚
â”‚  â€¢ Add citation links               â”‚
â”‚  â€¢ Highlight regulation IDs         â”‚
â”‚  â€¢ Add "Related Questions"          â”‚
â”‚  â€¢ Format markdown                  â”‚
â”‚                                     â”‚
â”‚  [Conversation Management]          â”‚
â”‚  â€¢ Save exchange to history         â”‚
â”‚  â€¢ Update conversation context      â”‚
â”‚  â€¢ Track user satisfaction          â”‚
â”‚                                     â”‚
â”‚  Output: Enhanced response          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Return JSON
           â”‚ {
           â”‚   "response": "...",
           â”‚   "sources": [...],
           â”‚   "related": [...],
           â”‚   "conversation_id": "xyz"
           â”‚ }
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Display Response)        â”‚
â”‚                                     â”‚
â”‚  [Render Components]                â”‚
â”‚  â€¢ Message bubble                   â”‚
â”‚  â€¢ Source citations (clickable)     â”‚
â”‚  â€¢ Related questions (chips)        â”‚
â”‚  â€¢ Feedback buttons (ğŸ‘ ğŸ‘)         â”‚
â”‚                                     â”‚
â”‚  [User Actions]                     â”‚
â”‚  â€¢ Read response                    â”‚
â”‚  â€¢ Click sources â†’ View regulation  â”‚
â”‚  â€¢ Click related â†’ Ask question     â”‚
â”‚  â€¢ Provide feedback                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
END: Conversation continues...
```

**Conversation Features:**
- **Multi-turn dialogue**: Maintains context across messages
- **Source citations**: Every claim linked to regulation
- **Follow-up suggestions**: Proactive related questions
- **Feedback loop**: User ratings improve responses

---

## ğŸ”„ Data Pipeline Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FIVETRAN DATA PIPELINE FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TRIGGER: Hourly Schedule (00:00, 01:00, 02:00, ...)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fivetran Scheduler                 â”‚
â”‚                                     â”‚
â”‚  [Check Sync Schedule]              â”‚
â”‚  â€¢ Current time: 14:00 UTC          â”‚
â”‚  â€¢ Last sync: 13:00 UTC             â”‚
â”‚  â€¢ Next sync due: Yes               â”‚
â”‚  â€¢ Initiate connector               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fivetran Connector (Python SDK)    â”‚
â”‚                                     â”‚
â”‚  [Initialize]                       â”‚
â”‚  â€¢ Load connector config            â”‚
â”‚  â€¢ Authenticate with source API     â”‚
â”‚  â€¢ Authenticate with BigQuery       â”‚
â”‚  â€¢ Check last sync state            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Extract Phase
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Extract: Compliance Analyses       â”‚
â”‚                                     â”‚
â”‚  [API Call]                         â”‚
â”‚  GET /api/analytics/documents       â”‚
â”‚  ?since=2025-01-15T13:00:00Z        â”‚
â”‚                                     â”‚
â”‚  [Backend Response]                 â”‚
â”‚  {                                  â”‚
â”‚    "analyses": [                    â”‚
â”‚      {                              â”‚
â”‚        "document_id": "abc123",     â”‚
â”‚        "document_name": "loan.pdf", â”‚
â”‚        "upload_timestamp": "...",   â”‚
â”‚        "compliance_score": 0.94,    â”‚
â”‚        "risk_level": "Low",         â”‚
â”‚        "total_clauses": 12,         â”‚
â”‚        "violations_count": 0        â”‚
â”‚      },                             â”‚
â”‚      ...                            â”‚
â”‚    ],                               â”‚
â”‚    "count": 15,                     â”‚
â”‚    "next_cursor": null              â”‚
â”‚  }                                  â”‚
â”‚                                     â”‚
â”‚  Output: 15 new analysis records    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Extract: Clause Verifications      â”‚
â”‚                                     â”‚
â”‚  [API Call]                         â”‚
â”‚  GET /api/analytics/clauses         â”‚
â”‚  ?since=2025-01-15T13:00:00Z        â”‚
â”‚                                     â”‚
â”‚  [Backend Response]                 â”‚
â”‚  {                                  â”‚
â”‚    "verifications": [               â”‚
â”‚      {                              â”‚
â”‚        "clause_id": "c1",           â”‚
â”‚        "document_id": "abc123",     â”‚
â”‚        "clause_number": 1,          â”‚
â”‚        "clause_text": "...",        â”‚
â”‚        "regulation_matched":        â”‚
â”‚          "SEBI LODR Reg 43",        â”‚
â”‚        "compliant": true,           â”‚
â”‚        "risk_score": 0.12,          â”‚
â”‚        "explanation": "..."         â”‚
â”‚      },                             â”‚
â”‚      ...                            â”‚
â”‚    ],                               â”‚
â”‚    "count": 180                     â”‚
â”‚  }                                  â”‚
â”‚                                     â”‚
â”‚  Output: 180 new clause records     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Extract: Risk Metrics              â”‚
â”‚                                     â”‚
â”‚  [API Call]                         â”‚
â”‚  GET /api/analytics/risks           â”‚
â”‚  ?since=2025-01-15T13:00:00Z        â”‚
â”‚                                     â”‚
â”‚  [Backend Response]                 â”‚
â”‚  {                                  â”‚
â”‚    "metrics": [                     â”‚
â”‚      {                              â”‚
â”‚        "metric_id": "m1",           â”‚
â”‚        "document_id": "abc123",     â”‚
â”‚        "risk_category": "Legal",    â”‚
â”‚        "severity": "Low",           â”‚
â”‚        "affected_clauses": [...],   â”‚
â”‚        "mitigation_required": false â”‚
â”‚      },                             â”‚
â”‚      ...                            â”‚
â”‚    ],                               â”‚
â”‚    "count": 22                      â”‚
â”‚  }                                  â”‚
â”‚                                     â”‚
â”‚  Output: 22 new risk records        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Transform Phase
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Transform Data                     â”‚
â”‚                                     â”‚
â”‚  [Schema Mapping]                   â”‚
â”‚  API Field â†’ BigQuery Column        â”‚
â”‚  â€¢ document_id â†’ STRING             â”‚
â”‚  â€¢ upload_timestamp â†’ TIMESTAMP     â”‚
â”‚  â€¢ compliance_score â†’ FLOAT64       â”‚
â”‚  â€¢ risk_level â†’ STRING              â”‚
â”‚  ...                                â”‚
â”‚                                     â”‚
â”‚  [Data Validation]                  â”‚
â”‚  â€¢ Check required fields            â”‚
â”‚  â€¢ Validate data types              â”‚
â”‚  â€¢ Handle null values               â”‚
â”‚  â€¢ Sanitize text fields             â”‚
â”‚                                     â”‚
â”‚  [Deduplication]                    â”‚
â”‚  â€¢ Check primary keys               â”‚
â”‚  â€¢ Skip duplicate records           â”‚
â”‚  â€¢ Track update timestamps          â”‚
â”‚                                     â”‚
â”‚  Output: Validated, transformed dataâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Load Phase
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load: BigQuery Destination         â”‚
â”‚                                     â”‚
â”‚  [Table 1: compliance_analyses]     â”‚
â”‚  â€¢ INSERT 15 new rows               â”‚
â”‚  â€¢ UPDATE 3 existing rows           â”‚
â”‚  â€¢ Total rows: 125 â†’ 137            â”‚
â”‚                                     â”‚
â”‚  [Table 2: clause_verifications]    â”‚
â”‚  â€¢ INSERT 180 new rows              â”‚
â”‚  â€¢ UPDATE 0 existing rows           â”‚
â”‚  â€¢ Total rows: 542 â†’ 722            â”‚
â”‚                                     â”‚
â”‚  [Table 3: risk_metrics]            â”‚
â”‚  â€¢ INSERT 22 new rows               â”‚
â”‚  â€¢ UPDATE 5 existing rows           â”‚
â”‚  â€¢ Total rows: 89 â†’ 106             â”‚
â”‚                                     â”‚
â”‚  [BigQuery Operations]              â”‚
â”‚  â€¢ Use streaming inserts            â”‚
â”‚  â€¢ Batch size: 500 rows             â”‚
â”‚  â€¢ Handle rate limits               â”‚
â”‚  â€¢ Retry on failure                 â”‚
â”‚                                     â”‚
â”‚  Output: Data loaded successfully   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Post-Load Operations               â”‚
â”‚                                     â”‚
â”‚  [Update Sync State]                â”‚
â”‚  â€¢ Record sync timestamp            â”‚
â”‚  â€¢ Store last cursor/offset         â”‚
â”‚  â€¢ Update row counts                â”‚
â”‚  â€¢ Calculate sync duration          â”‚
â”‚                                     â”‚
â”‚  [Data Quality Checks]              â”‚
â”‚  â€¢ Run validation queries           â”‚
â”‚  â€¢ Check for anomalies              â”‚
â”‚  â€¢ Verify referential integrity     â”‚
â”‚                                     â”‚
â”‚  [Notifications]                    â”‚
â”‚  IF errors > 0:                     â”‚
â”‚    â†’ Send alert email               â”‚
â”‚  ELSE:                              â”‚
â”‚    â†’ Log success                    â”‚
â”‚                                     â”‚
â”‚  Output: Sync complete              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fivetran Dashboard Update          â”‚
â”‚                                     â”‚
â”‚  [Metrics]                          â”‚
â”‚  â€¢ Rows synced: 217                 â”‚
â”‚  â€¢ Duration: 45 seconds             â”‚
â”‚  â€¢ Next sync: 15:00 UTC             â”‚
â”‚  â€¢ Status: âœ… Success               â”‚
â”‚                                     â”‚
â”‚  [Logs]                             â”‚
â”‚  14:00:00 - Sync started            â”‚
â”‚  14:00:05 - Extracted 217 rows      â”‚
â”‚  14:00:15 - Transformed data        â”‚
â”‚  14:00:30 - Loaded to BigQuery      â”‚
â”‚  14:00:45 - Sync completed          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BigQuery Ready for Analytics       â”‚
â”‚                                     â”‚
â”‚  [Available Tables]                 â”‚
â”‚  â€¢ reglex_compliance.               â”‚
â”‚    compliance_analyses              â”‚
â”‚  â€¢ reglex_compliance.               â”‚
â”‚    clause_verifications             â”‚
â”‚  â€¢ reglex_compliance.               â”‚
â”‚    risk_metrics                     â”‚
â”‚                                     â”‚
â”‚  [Use Cases]                        â”‚
â”‚  â€¢ Power BI dashboards              â”‚
â”‚  â€¢ Looker reports                   â”‚
â”‚  â€¢ Custom SQL queries               â”‚
â”‚  â€¢ ML model training                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
END: Wait for next sync (15:00 UTC)
```

**Pipeline Metrics:**
- **Frequency**: Hourly
- **Latency**: < 1 minute
- **Throughput**: 200-500 rows/sync
- **Reliability**: 99.5% success rate

---

## ğŸ“Š Analytics Dashboard Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ANALYTICS DASHBOARD DATA FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START: User opens Dashboard page
  â”‚
  â”‚ GET /dashboard/analytics
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Analytics Page)          â”‚
â”‚                                     â”‚
â”‚  [Page Load]                        â”‚
â”‚  â€¢ Show loading skeleton            â”‚
â”‚  â€¢ Initialize chart components      â”‚
â”‚  â€¢ Prepare data fetching            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Parallel API Calls (3 requests)
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                 â”‚                  â”‚
           â–¼                 â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Request 1    â”‚  â”‚  Request 2       â”‚  â”‚  Request 3     â”‚
â”‚               â”‚  â”‚                  â”‚  â”‚                â”‚
â”‚  GET /api/    â”‚  â”‚  GET /api/       â”‚  â”‚  GET /kibana/  â”‚
â”‚  dashboard/   â”‚  â”‚  analytics       â”‚  â”‚  dashboard     â”‚
â”‚  overview     â”‚  â”‚  (BigQuery data) â”‚  â”‚  (Elastic data)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                     â”‚
        â”‚                   â”‚                     â”‚
        â–¼                   â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Processing (Parallel)                        â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Handler 1: Overview Metrics                 â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  [Query Elasticsearch]                       â”‚    â”‚
â”‚  â”‚  GET _search {                               â”‚    â”‚
â”‚  â”‚    "aggs": {                                 â”‚    â”‚
â”‚  â”‚      "total_docs": {"value_count": ...},     â”‚    â”‚
â”‚  â”‚      "avg_compliance": {"avg": ...},         â”‚    â”‚
â”‚  â”‚      "risk_dist": {"terms": ...}             â”‚    â”‚
â”‚  â”‚    }                                         â”‚    â”‚
â”‚  â”‚  }                                           â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  Response:                                   â”‚    â”‚
â”‚  â”‚  {                                           â”‚    â”‚
â”‚  â”‚    "total_documents": 125,                   â”‚    â”‚
â”‚  â”‚    "avg_compliance_score": 0.942,            â”‚    â”‚
â”‚  â”‚    "high_risk_count": 3,                     â”‚    â”‚
â”‚  â”‚    "risk_distribution": {                    â”‚    â”‚
â”‚  â”‚      "Low": 98,                              â”‚    â”‚
â”‚  â”‚      "Medium": 24,                           â”‚    â”‚
â”‚  â”‚      "High": 3                               â”‚    â”‚
â”‚  â”‚    }                                         â”‚    â”‚
â”‚  â”‚  }                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Handler 2: Analytics (BigQuery)             â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  [Query 1: Compliance Trend]                 â”‚    â”‚
â”‚  â”‚  SELECT                                      â”‚    â”‚
â”‚  â”‚    DATE(upload_timestamp) as date,           â”‚    â”‚
â”‚  â”‚    AVG(overall_compliance_score) as score    â”‚    â”‚
â”‚  â”‚  FROM reglex_compliance.                     â”‚    â”‚
â”‚  â”‚       compliance_analyses                    â”‚    â”‚
â”‚  â”‚  WHERE upload_timestamp >= DATE_SUB(         â”‚    â”‚
â”‚  â”‚    CURRENT_DATE(), INTERVAL 30 DAY           â”‚    â”‚
â”‚  â”‚  )                                           â”‚    â”‚
â”‚  â”‚  GROUP BY date                               â”‚    â”‚
â”‚  â”‚  ORDER BY date;                              â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  [Query 2: Common Violations]                â”‚    â”‚
â”‚  â”‚  SELECT                                      â”‚    â”‚
â”‚  â”‚    regulation_matched,                       â”‚    â”‚
â”‚  â”‚    COUNT(*) as count                         â”‚    â”‚
â”‚  â”‚  FROM reglex_compliance.                     â”‚    â”‚
â”‚  â”‚       clause_verifications                   â”‚    â”‚
â”‚  â”‚  WHERE compliant = FALSE                     â”‚    â”‚
â”‚  â”‚  GROUP BY regulation_matched                 â”‚    â”‚
â”‚  â”‚  ORDER BY count DESC                         â”‚    â”‚
â”‚  â”‚  LIMIT 10;                                   â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  Response:                                   â”‚    â”‚
â”‚  â”‚  {                                           â”‚    â”‚
â”‚  â”‚    "trend": [{date, score}, ...],            â”‚    â”‚
â”‚  â”‚    "violations": [{reg, count}, ...]         â”‚    â”‚
â”‚  â”‚  }                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Handler 3: Kibana Dashboard Data            â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  [Query Elasticsearch Aggregations]          â”‚    â”‚
â”‚  â”‚  â€¢ Search query performance                  â”‚    â”‚
â”‚  â”‚  â€¢ Index statistics                          â”‚    â”‚
â”‚  â”‚  â€¢ Real-time metrics                         â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚  Response:                                   â”‚    â”‚
â”‚  â”‚  {                                           â”‚    â”‚
â”‚  â”‚    "search_performance": {                   â”‚    â”‚
â”‚  â”‚      "avg_latency_ms": 180,                  â”‚    â”‚
â”‚  â”‚      "total_queries": 1543                   â”‚    â”‚
â”‚  â”‚    },                                        â”‚    â”‚
â”‚  â”‚    "index_stats": {                          â”‚    â”‚
â”‚  â”‚      "doc_count": 10247,                     â”‚    â”‚
â”‚  â”‚      "size_mb": 125.3                        â”‚    â”‚
â”‚  â”‚    }                                         â”‚    â”‚
â”‚  â”‚  }                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Combine responses
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Render Dashboard)        â”‚
â”‚                                     â”‚
â”‚  [Component 1: Metrics Cards]       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“„ Total Documents: 125      â”‚ â”‚
â”‚  â”‚  âœ… Avg Compliance: 94.2%     â”‚ â”‚
â”‚  â”‚  âš ï¸  High Risk: 3             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  [Component 2: Risk Pie Chart]      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Risk Distribution      â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚      ğŸŸ¢ Low: 78%              â”‚ â”‚
â”‚  â”‚      ğŸŸ¡ Medium: 19%           â”‚ â”‚
â”‚  â”‚      ğŸ”´ High: 3%              â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚      [Pie Chart Visual]       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  [Component 3: Trend Line Chart]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Compliance Score Over Time  â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â”‚  100% â”‚        â•±â”€â•²            â”‚ â”‚
â”‚  â”‚       â”‚      â•±     â•²          â”‚ â”‚
â”‚  â”‚   90% â”‚    â•±         â”€        â”‚ â”‚
â”‚  â”‚       â”‚  â•±                    â”‚ â”‚
â”‚  â”‚   80% â”‚â•±                      â”‚ â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚       Jan  Feb  Mar  Apr  May â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  [Component 4: Violations Table]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Most Common Violations       â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  SEBI LODR Reg 43      12     â”‚ â”‚
â”‚  â”‚  SEBI ICDR Reg 26       8     â”‚ â”‚
â”‚  â”‚  SEBI PIT Reg 7         5     â”‚ â”‚
â”‚  â”‚  ...                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  [Component 5: Fivetran Status]     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Data Pipeline Status         â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  Last Sync: 2 min ago âœ…      â”‚ â”‚
â”‚  â”‚  Next Sync: 58 min            â”‚ â”‚
â”‚  â”‚  Rows Synced: 217             â”‚ â”‚
â”‚  â”‚  Status: Healthy              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
END: Dashboard fully rendered
```

**Dashboard Features:**
- **Real-time updates**: Refresh every 30 seconds
- **Interactive charts**: Click to drill down
- **Export options**: Download as PDF or CSV
- **Responsive design**: Mobile-friendly

---

## âŒ Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ERROR HANDLING & RECOVERY FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ERROR OCCURS
  â”‚
  â”œâ”€â”€â”€ Case 1: Elasticsearch Unavailable
  â”‚     â”‚
  â”‚     â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Detect]                       â”‚
  â”‚    â”‚  â€¢ Connection timeout           â”‚
  â”‚    â”‚  â€¢ Cluster unhealthy            â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚               â”‚
  â”‚               â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Fallback Strategy]            â”‚
  â”‚    â”‚  1. Retry with exponential      â”‚
  â”‚    â”‚     backoff (3 attempts)        â”‚
  â”‚    â”‚  2. Use cached results          â”‚
  â”‚    â”‚  3. Degrade gracefully          â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚               â”‚
  â”‚               â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Recovery]                     â”‚
  â”‚    â”‚  â€¢ Alert monitoring system      â”‚
  â”‚    â”‚  â€¢ Log error with context       â”‚
  â”‚    â”‚  â€¢ Return cached/partial data   â”‚
  â”‚    â”‚  â€¢ Show user-friendly message   â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â”€â”€ Case 2: Vertex AI API Failure
  â”‚     â”‚
  â”‚     â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Detect]                       â”‚
  â”‚    â”‚  â€¢ API rate limit exceeded      â”‚
  â”‚    â”‚  â€¢ Authentication failure       â”‚
  â”‚    â”‚  â€¢ Model unavailable            â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚               â”‚
  â”‚               â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Fallback Strategy]            â”‚
  â”‚    â”‚  1. Try Claude (Anthropic)      â”‚
  â”‚    â”‚  2. Try OpenAI GPT-4            â”‚
  â”‚    â”‚  3. Use rule-based checker      â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚               â”‚
  â”‚               â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Recovery]                     â”‚
  â”‚    â”‚  â€¢ Switch to backup LLM         â”‚
  â”‚    â”‚  â€¢ Continue processing          â”‚
  â”‚    â”‚  â€¢ Log provider switch          â”‚
  â”‚    â”‚  â€¢ Monitor costs                â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â”€â”€ Case 3: BigQuery Sync Failure
  â”‚     â”‚
  â”‚     â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Detect]                       â”‚
  â”‚    â”‚  â€¢ Fivetran connector error     â”‚
  â”‚    â”‚  â€¢ Schema mismatch              â”‚
  â”‚    â”‚  â€¢ Quota exceeded               â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚               â”‚
  â”‚               â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Fallback Strategy]            â”‚
  â”‚    â”‚  1. Queue data locally          â”‚
  â”‚    â”‚  2. Retry in next sync cycle    â”‚
  â”‚    â”‚  3. Alert data team             â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚               â”‚
  â”‚               â–¼
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    â”‚  [Recovery]                     â”‚
  â”‚    â”‚  â€¢ Store in temporary queue     â”‚
  â”‚    â”‚  â€¢ Auto-retry on next sync      â”‚
  â”‚    â”‚  â€¢ No data loss                 â”‚
  â”‚    â”‚  â€¢ Email notification sent      â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â””â”€â”€â”€ Case 4: PDF Parsing Error
        â”‚
        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  [Detect]                       â”‚
       â”‚  â€¢ Corrupted PDF                â”‚
       â”‚  â€¢ Encrypted/password-protected â”‚
       â”‚  â€¢ Unsupported format           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  [Fallback Strategy]            â”‚
       â”‚  1. Try alternative parser      â”‚
       â”‚  2. Extract images via OCR      â”‚
       â”‚  3. Return partial results      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  [Recovery]                     â”‚
       â”‚  â€¢ Notify user of issue         â”‚
       â”‚  â€¢ Provide manual upload option â”‚
       â”‚  â€¢ Log for manual review        â”‚
       â”‚  â€¢ Refund credits (if paid)     â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Error Recovery Principles:**
- **Graceful Degradation**: Partial results > no results
- **Retry with Backoff**: 3 attempts with exponential delay
- **Fallback Providers**: Multiple LLM options
- **User Communication**: Clear, actionable error messages

---

## ğŸ”— Component Interaction Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPONENT INTERACTION MATRIX                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚       Component Relationships         â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚   Frontend    â”‚   Backend    â”‚ Elasticsearchâ”‚  Vertex AI   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frontend   â”‚      -        â”‚ HTTPS REST   â”‚      -       â”‚      -       â”‚
â”‚            â”‚               â”‚ WebSocket    â”‚              â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Backend    â”‚ JSON Response â”‚      -       â”‚ Hybrid Searchâ”‚ LLM API      â”‚
â”‚            â”‚               â”‚              â”‚ Aggregations â”‚ Streaming    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Elasticsearchâ”‚      -        â”‚ Python Clientâ”‚      -       â”‚      -       â”‚
â”‚            â”‚               â”‚ API Key Auth â”‚              â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Vertex AI  â”‚      -        â”‚ Google SDK   â”‚      -       â”‚      -       â”‚
â”‚            â”‚               â”‚ OAuth 2.0    â”‚              â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BigQuery   â”‚ Direct Query  â”‚ Python Clientâ”‚      -       â”‚      -       â”‚
â”‚            â”‚               â”‚ Service Acct â”‚              â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Fivetran  â”‚ Dashboard UI  â”‚ REST API     â”‚      -       â”‚      -       â”‚
â”‚            â”‚               â”‚ Polling      â”‚              â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Kibana    â”‚ Embedded      â”‚ REST API     â”‚ Native       â”‚      -       â”‚
â”‚            â”‚ iFrames       â”‚              â”‚ Integration  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Communication Protocols:
  â€¢ HTTPS REST API (synchronous)
  â€¢ WebSocket (real-time streaming)
  â€¢ gRPC (internal services)
  â€¢ Event-driven (pub/sub for async)

Authentication Methods:
  â€¢ API Keys (Elasticsearch, Gemini)
  â€¢ OAuth 2.0 (Google services)
  â€¢ Service Accounts (GCP)
  â€¢ JWT tokens (user sessions)
```

---

## ğŸ“ˆ Flow Summary

### Key Flows
1. **Document Upload**: User â†’ Frontend â†’ Backend â†’ Storage â†’ AI â†’ Results
2. **Compliance Analysis**: Clause â†’ Embeddings â†’ Search â†’ LLM â†’ Verification
3. **Chat**: Question â†’ Context Retrieval â†’ LLM â†’ Formatted Response
4. **Data Pipeline**: Backend API â†’ Fivetran â†’ BigQuery (hourly)
5. **Analytics**: BigQuery + Elastic â†’ Dashboard Visualization

### Performance Targets
- **Upload & Analysis**: < 10 seconds (10 clauses)
- **Chat Response**: < 3 seconds (streaming)
- **Dashboard Load**: < 2 seconds
- **Data Sync**: < 1 minute (hourly)

### Reliability Measures
- **Retry Logic**: 3 attempts with exponential backoff
- **Fallback Providers**: Multiple LLM options
- **Caching**: Redis for frequent queries
- **Monitoring**: Real-time alerts on failures

---

**Built for Google Accelerate Hackathon 2025**
**RegLex AI - Transforming Legal Compliance Through AI**

ğŸ”„ **Complete System Flows** | ğŸ“Š **Visual Documentation** | âš¡ **Production-Ready**
